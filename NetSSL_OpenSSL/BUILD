cc_library(
    name = "NetSSL",
    srcs = glob([
        "src/*.h",
        "src/*.inc",
    ]) + [
        "src/AcceptCertificateHandler.cpp",
        "src/RejectCertificateHandler.cpp",
        "src/ConsoleCertificateHandler.cpp",
        "src/CertificateHandlerFactory.cpp",
        "src/CertificateHandlerFactoryMgr.cpp",
        "src/Context.cpp",
        "src/HTTPSClientSession.cpp",
        "src/HTTPSStreamFactory.cpp",
        "src/HTTPSSessionInstantiator.cpp",
        "src/InvalidCertificateHandler.cpp",
        "src/KeyConsoleHandler.cpp",
        "src/KeyFileHandler.cpp",
        "src/PrivateKeyFactory.cpp",
        "src/PrivateKeyFactoryMgr.cpp",
        "src/PrivateKeyPassphraseHandler.cpp",
        "src/SecureServerSocket.cpp",
        "src/SecureServerSocketImpl.cpp",
        "src/SecureSocketImpl.cpp",
        "src/SecureStreamSocket.cpp",
        "src/SecureStreamSocketImpl.cpp",
        "src/SSLException.cpp",
        "src/SSLManager.cpp",
        "src/Utility.cpp",
        "src/VerificationErrorArgs.cpp",
        "src/X509Certificate.cpp",
        "src/Session.cpp",
        "src/SecureSMTPClientSession.cpp",
    ],
    hdrs = glob(["include/**/*.h"]),
    copts = [
        "-Wno-sign-compare",
        "-Wno-unknown-pragmas",
        "-D_XOPEN_SOURCE=500",
        "-D_REENTRANT",
        "-D_THREAD_SAFE",
        "-D_FILE_OFFSET_BITS=64",
        "-D_LARGEFILE64_SOURCE",
        "-DPOCO_HAVE_FD_EPOLL",
    ],
    includes = ["include"],
    visibility = ["//visibility:public"],
    deps = [
        "//Crypto",
        "//Net",
        "//external:openssl",
    ],
)
